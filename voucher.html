<html>
<head>
	<meta charset="utf-8">
	<title>
		Check Out
	</title>
	<script>
		function voucher20(){
			var code = document.getElementById("code").value;
			var discount = 0.2;
			var min_purchase = 100;
			var ex_dd = 14;
			var ex_mm = 7;
			var ex_yy = 2019;
			today = new Date();
			var dd = today.getDate();
			var mm = today.getMonth()+1; //As January is 0.
			var yyyy = today.getFullYear();
			var subT = document.getElementById("subtotal").value;
			var shipF = document.getElementById("shipping").value;
			var T = parseFloat(document.getElementById("total").value);
			var t1 = parseFloat(subT)+parseFloat(shipF);
			
			if(code=="20FORME"){
				if(dd != 31 && mm+1 == ex_mm && yyyy == ex_yy){
					if(subT >= min_purchase){
						T = t1 - (t1*discount);
						document.getElementById("total").value = T.toFixed(2)
					}
					else{document.getElementById("total").value = t1.toFixed(2)}
				}
				else{document.getElementById("total").value = t1.toFixed(2)}
			}
			else{document.getElementById("total").value = t1.toFixed(2)}
		}
		
		
	</script>
	<style>
		div{
			margin: auto;
			width: 50%;
			padding: 10px;
		}
	</style>
</head>
<body>
	<div>
	<h3>Check Out</h3>
		<table>
			<tr>
				<td>Subtotal</td>
				<td>RM</td>
				<td><input type="text" id="subtotal" value="300.00"/></td>
			</tr>
			<tr>
				<td>Shipping Fee</td>
				<td>RM</td>
				<td><input type="text" id="shipping" value="0.00"/></td>
			</tr>
			<tr>
				<td>Voucher Code</td>
				<td></td>
				<td><input type="text" id="code" /></td>
			</tr>
			<tr>
				<td>Total</td>
				<td>RM</td>
				<td><input type="text" id="total" value="300.00"/></td>
			</tr>
		</table>
		<button onclick="voucher20()">Proceed</button>
	</div>
</body>
</html>